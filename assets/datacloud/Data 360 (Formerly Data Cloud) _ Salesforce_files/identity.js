var J=Object.create;var x=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,Q=Object.prototype.hasOwnProperty;var a=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Z=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of X(t))!Q.call(e,s)&&s!==o&&x(e,s,{get:()=>t[s],enumerable:!(n=Y(t,s))||n.enumerable});return e};var I=(e,t,o)=>(o=e!=null?J(K(e)):{},Z(t||!e||!e.__esModule?x(o,"default",{value:e,enumerable:!0}):o,e));var _=a(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.joinPath=g.splitPath=void 0;var P="/",ne=e=>e?e.trim().split(P).filter(t=>!!t):[];g.splitPath=ne;var se=(...e)=>{let t=`${P}${e.reduce((n,s)=>[...n,...(0,g.splitPath)(s)],[]).join(P)}`,o=e[e.length-1];return e&&o.endsWith(P)&&(t+=P),t};g.joinPath=se});var D=a((Je,re)=>{re.exports={us:{loc:"us",lang:"en"},ca:{loc:"ca",lang:"en"},fr:{loc:"fr",lang:"fr"},"fr-ca":{loc:"ca",lang:"fr"},"fr-ch":{loc:"ch",lang:"fr"},uk:{loc:"gb",lang:"en"},de:{loc:"de",lang:"de"},"de-ch":{loc:"ch",lang:"de"},es:{loc:"es",lang:"es"},it:{loc:"it",lang:"it"},nl:{loc:"nl",lang:"nl"},"nl-be":{loc:"nl",lang:"be"},se:{loc:"se",lang:"sv"},eu:{loc:"eu",lang:"en"},mx:{loc:"mx",lang:"es"},br:{loc:"br",lang:"pt"},au:{loc:"au",lang:"en"},in:{loc:"in",lang:"en"},jp:{loc:"jp",lang:"ja"},kr:{loc:"kr",lang:"ko"},th:{loc:"th",lang:"th"},tw:{loc:"tw",lang:"zh"},hk:{loc:"hk",lang:"zh"},cn:{loc:"cn",lang:"zh"},my:{loc:"my",lang:"en"},ap:{loc:"ap",lang:"en"},latam:{loc:"latam",lang:"es"},no:{loc:"no",lang:"no"},dk:{loc:"dk",lang:"da"},pl:{loc:"pl",lang:"pl"},tr:{loc:"tr",lang:"tr"},fi:{loc:"fi",lang:"fi"},ch:{loc:"ch",lang:""},sa:{loc:"sa",lang:"ar"}}});var w=a(d=>{"use strict";var ae=d&&d.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(d,"__esModule",{value:!0});d.UrlLocale=void 0;var le=_(),ie=ae(D()),ce="us",y=class{constructor(t,o){if(this.langLoc="",this.urlLoc="",this.basePath="",this.loc="",this.lang="",this.segs=[],this.setBasePath=c=>{this.urlLoc!==c&&this.segs.splice(0,1),this.basePath=`/${this.segs.join("/")}`},!t)return;let n=o?.localeMap||ie.default,s=o?.defaultLocale||ce;if(this.segs=(0,le.splitPath)(t),this.urlLoc=this.segs.length&&this.segs[0]in n?this.segs[0]:s,!n[this.urlLoc])throw new Error(`No locale config found for given url /${this.urlLoc}.`);let f=Object.assign(n[this.urlLoc]);this.lang=f.lang,this.loc=f.loc,this.langLoc=`${this.lang}-${this.loc}`,this.setBasePath(s)}};d.UrlLocale=y});var F=a(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.joinPath=l.splitPath=l.UrlLocale=void 0;var ue=w();Object.defineProperty(l,"UrlLocale",{enumerable:!0,get:function(){return ue.UrlLocale}});var U=_();Object.defineProperty(l,"splitPath",{enumerable:!0,get:function(){return U.splitPath}});Object.defineProperty(l,"joinPath",{enumerable:!0,get:function(){return U.joinPath}})});var G=a(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var C=F(),ge="SFDC";L.default=(e,t=ge)=>{let o;if(e===void 0||typeof e=="string"){let s=globalThis.sfdcBase||{};if(!e&&!pe(s.page))return s.page.pagename;o=new C.UrlLocale(e||location.pathname)}else o=e;return[...[t,o.urlLoc],...o.basePath==="/"?["homepage"]:(0,C.splitPath)(o.basePath)].join(":")};var pe=e=>!e||e instanceof Object&&!Object.keys(e).length});var A=a(p=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});p.joinPath=p.splitPath=void 0;var b="/",Le=e=>e?e.trim().split(b).filter(t=>!!t):[];p.splitPath=Le;var Re=(...e)=>{let t=`${b}${e.reduce((n,s)=>[...n,...(0,p.splitPath)(s)],[]).join(b)}`,o=e[e.length-1];return e&&o.endsWith(b)&&(t+=b),t};p.joinPath=Re});var B=a((nt,je)=>{je.exports={us:{loc:"us",lang:"en"},ca:{loc:"ca",lang:"en"},fr:{loc:"fr",lang:"fr"},"fr-ca":{loc:"ca",lang:"fr"},"fr-ch":{loc:"ch",lang:"fr"},uk:{loc:"gb",lang:"en"},de:{loc:"de",lang:"de"},"de-ch":{loc:"ch",lang:"de"},es:{loc:"es",lang:"es"},it:{loc:"it",lang:"it"},nl:{loc:"nl",lang:"nl"},"nl-be":{loc:"nl",lang:"be"},se:{loc:"se",lang:"sv"},eu:{loc:"eu",lang:"en"},mx:{loc:"mx",lang:"es"},br:{loc:"br",lang:"pt"},au:{loc:"au",lang:"en"},in:{loc:"in",lang:"en"},jp:{loc:"jp",lang:"ja"},kr:{loc:"kr",lang:"ko"},th:{loc:"th",lang:"th"},tw:{loc:"tw",lang:"zh"},hk:{loc:"hk",lang:"zh"},cn:{loc:"cn",lang:"zh"},my:{loc:"my",lang:"en"},ap:{loc:"ap",lang:"en"},latam:{loc:"latam",lang:"es"},no:{loc:"no",lang:"no"},dk:{loc:"dk",lang:"da"},pl:{loc:"pl",lang:"pl"},tr:{loc:"tr",lang:"tr"},fi:{loc:"fi",lang:"fi"},ch:{loc:"ch",lang:""}}});var q=a(h=>{"use strict";var Ee=h&&h.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(h,"__esModule",{value:!0});h.UrlLocale=void 0;var Ae=A(),k=Ee(B()),$="us",T=class{constructor(t){if(this.langLoc="",this.urlLoc="",this.basePath="",this.loc="",this.lang="",this.segs=[],this.setBasePath=()=>{this.loc!==$&&this.segs.splice(0,1),this.basePath=`/${this.segs.join("/")}`},!t)return;this.segs=(0,Ae.splitPath)(t),this.urlLoc=this.segs.length&&this.segs[0]in k.default?this.segs[0]:$;let o=Object.assign(k.default[this.urlLoc]);this.lang=o.lang,this.loc=o.loc,this.langLoc=`${this.lang}-${this.loc}`,this.setBasePath()}};h.UrlLocale=T});var z=a(i=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.joinPath=i.splitPath=i.UrlLocale=void 0;var Te=q();Object.defineProperty(i,"UrlLocale",{enumerable:!0,get:function(){return Te.UrlLocale}});var W=A();Object.defineProperty(i,"splitPath",{enumerable:!0,get:function(){return W.splitPath}});Object.defineProperty(i,"joinPath",{enumerable:!0,get:function(){return W.joinPath}})});var m=globalThis.sfdcBase||{};var u={WARN:"warn",INFO:"info",DEBUG:"debug",DEPRECATE:"deprecate"},ee="client-libs-debug",O=async(e,...t)=>{let o=sessionStorage.getItem(ee),n=o==="mute";if(!t.length||n)return;let s=console,f="trace",c;switch(e){case u.DEPRECATE:c=s[f],t=`${t} has been deprecated. Please update or remove reference`;break;case u.DEBUG:o&&!n&&(c=s[f]);break;case u.INFO:case u.WARN:c=s[e];break}typeof c=="function"&&c(t)};var Be=!!(m.env&&m.env.toLowerCase()==="prod");var S=e=>{let t=localStorage.getItem(e);try{t=JSON.parse(t)}catch{}return t??""};var te="webactls";globalThis.digitalData=globalThis.digitalData||{page:{},user:[{}],localStorage:{...S(te)||{}},util:{}};globalThis.digitalData.timestamp=globalThis.digitalData.timestamp||new Date().getTime();var oe=globalThis.digitalData;var xe=I(G());var de="https://c.salesforce.com",he=globalThis?.cliLibsConfig?.cdnScriptsOrigin||"https://a.sfdcstatic.com",fe="/digital/@sfdc-www/clientlibs-web-components",me="v1",Pe="gdpr.js",be="v1",ve="/digital/one-trust/ext";var j="analytics.js";var M={QA:"latest",UAT:"stage",PROD:"stable",DEV:"latest",INT:"stage",HOTFIX:"stable",ONBOARD:"stable"},N="Could not import module URL: ",R=m.env||"",Oe=R&&M[R]?M[R]:"stable",_e={ver:me,path:fe,envTag:Oe},ye=(e,t)=>{if(e)try{t={..._e,...t};let o=t.verDir||`${t.ver}-${t.envTag}`,n;return e==="iis.min.js"?n=new URL(t.path,de):n=new URL(t.path,he),n.pathname+=`/${[o,e].join("/")}`,n.toString()}catch{}},v=(e,t)=>{let o=ye(e,t);return o?import(o).catch(n=>{O(u.WARN,`${N} ${o}`)}):Promise.reject(`${N} ${e}`)},E=v(Pe,{ver:be,path:ve});var H=I(z());var V="digital-identity-attributes",Ie=async()=>v(j).then(e=>e.getGACID()),Se=async()=>{let e=await v(j);return e.getUserProfile(e.USER_PROFILES.TB)},De=async()=>{let e=await E;return await e.onGdprReady.then(()=>e.isActiveGroup(e.OT_FUNCTIONAL))},we=async()=>{let e=await E;return await e.onGdprReady.then(()=>e.isActiveGroup(e.OT_ADVERTISING))},r={gacIdResolver:Ie,tbidUserInfoResolver:Se,gdprFunctionalResolver:De,gdprAdvertisingResolver:we},ft=e=>{r.gacIdResolver=e},mt=e=>{r.tbidUserInfoResolver=e},Pt=e=>{r.gdprFunctionalResolver=e},bt=e=>{r.gdprAdvertisingResolver=e},vt=async()=>r.gacIdResolver(),Ot=async()=>r.tbidUserInfoResolver(),_t=async()=>r.gdprFunctionalResolver(),yt=async()=>r.gdprAdvertisingResolver(),Ue=(e,t)=>t??e;typeof window<"u"&&(r=window[V]=Ue(r,window[V]));export{vt as getGacId,Ot as getTbidUserInfo,Ue as initializeState,yt as isGdprAdvertising,_t as isGdprFunctional,ft as setGacIdResolver,bt as setGdprAdvertisingResolver,Pt as setGdprFunctionalResolver,mt as setTbidUserInfoResolver};
//# sourceMappingURL=identity.js.map
